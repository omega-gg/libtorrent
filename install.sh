#!/bin/sh
set -e

#--------------------------------------------------------------------------------------------------
# Settings
#--------------------------------------------------------------------------------------------------

external="../3rdparty"

#--------------------------------------------------------------------------------------------------

MinGW_version="7.3.0"

libtorrent_versionA="1.2.2"
libtorrent_versionB="1_2_2"

Boost_versionA="1.71.0"
Boost_versionB="1_71_0"

#--------------------------------------------------------------------------------------------------

thirdparty="http://omega.gg/get/Sky/3rdparty/win32"

boost="https://dl.bintray.com/boostorg/release/$Boost_versionA/source/boost_$Boost_versionB.zip"

libtorrent="https://github.com/arvidn/libtorrent/releases/download/libtorrent-$libtorrent_versionB/libtorrent-rasterbar-$libtorrent_versionA.tar.gz"

#--------------------------------------------------------------------------------------------------
# Configuration
#--------------------------------------------------------------------------------------------------

MinGW="$external/win32/MinGW/$MinGW_version"

#--------------------------------------------------------------------------------------------------
# Download
#--------------------------------------------------------------------------------------------------

echo ""
echo "DOWNLOADING 3rdparty"
echo $thirdparty
curl -L -o ../3rdparty.zip $thirdparty

echo ""
echo "DOWNLOADING boost"
echo $boost
curl -L -o boost.zip $boost

echo ""
echo "DOWNLOADING libtorrent"
echo $libtorrent
curl -L -o libtorrent.tar.gz $libtorrent

#--------------------------------------------------------------------------------------------------
# 3rdparty
#--------------------------------------------------------------------------------------------------

cd ..

unzip 3rdparty.zip

cd -

#--------------------------------------------------------------------------------------------------
# MinGW
#--------------------------------------------------------------------------------------------------

cp -r $MinGW MinGW

#--------------------------------------------------------------------------------------------------
# Boost
#--------------------------------------------------------------------------------------------------

unzip boost.zip

mv boost_$Boost_versionB boost

#--------------------------------------------------------------------------------------------------
# libtorrent
#--------------------------------------------------------------------------------------------------

tar -xf libtorrent.tar.gz

mv libtorrent-rasterbar-$libtorrent_versionA libtorrent
